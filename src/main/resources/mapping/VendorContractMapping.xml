<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.authine.cloudpivot.ext.mapper.VendorContractMapper" >


	<select id="getVendorContractList"  resultType="com.authine.cloudpivot.ext.vo.VendorContractVO">
		SELECT
			v.id id,
			p.Jobcode jobcode,
			v.ProjectName projectName,
			c.NAME contractType,
			v.VendorName vendorName,
			ccv.NAME vendorContractVersion,
			v.VendorContractCode vendorContractCode,
			v.VendorContractStarttime vendorContractStarttime,
			v.VendorContractEndtime vendorContractEndtime,
			v.VenderContracgtSigningDate venderContracgtSigningDate,
			v.VendorContractStatus vendorContractStatus,
			v.ContractValue contractValue
		FROM
			i_vendorcontract v
		JOIN i_project_summary p
		JOIN i_contracttype c
		JOIN i_client_contract_version ccv ON v.Jobcode = p.id
		AND v.contractType = c.id
		AND v.vendorContractVersion = ccv.id and
			<if test="queryVendorContract.vendorContractStatus !=null and queryVendorContract.vendorContractStatus!='' ">
				v.VendorContractStatus = #{queryVendorContract.vendorContractStatus}  and
			</if>

			<if test="queryVendorContract.starttimeStart !=null and queryVendorContract.starttimeStart !='' ">
				v.VendorContractStarttime &gt;= STR_TO_DATE(#{queryVendorContract.starttimeStart},'%Y-%m-%d')  and
			</if>

			<if test="queryVendorContract.starttimeEnd !=null and queryVendorContract.starttimeEnd !=''">
				v.VendorContractStarttime &lt;= STR_TO_DATE(#{queryVendorContract.starttimeEnd},'%Y-%m-%d')  and
			</if>

			<if test="queryVendorContract.contractValue1 !=null and queryVendorContract.contractValue1 !='' ">
				v.ContractValue &gt;= #{queryVendorContract.contractValue1}  and
			</if>

			<if test="queryVendorContract.contractValue2 !=null and queryVendorContract.contractValue2 !='' ">
				v.ContractValue &lt;= #{queryVendorContract.contractValue2}  and
			</if>

			1=1

	</select>






</mapper>